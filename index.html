<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>WorldMe - Social Map & Party Discovery</title>
    <meta name="description" content="Meet friends through animated avatars, discover epic parties nearby, and create unforgettable memories on the social map. Join WorldMe today!" />
    <meta name="author" content="WorldMe" />

    <meta property="og:title" content="WorldMe - Social Map & Party Discovery" />
    <meta property="og:description" content="Meet friends through animated avatars, discover epic parties nearby, and create unforgettable memories on the social map. Join WorldMe today!" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@WorldMeApp" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    
    <!-- Critical inline CSS for fast first paint -->
    <style>
      /* Critical CSS variables for immediate availability */
      :root {
        --background: 240 10% 3.9%;
        --foreground: 0 0% 98%;
        --card: 240 10% 3.9%;
        --card-foreground: 0 0% 98%;
        --primary: 270 95% 65%;
        --primary-foreground: 0 0% 98%;
        --primary-glow: 280 100% 75%;
        --secondary: 210 100% 70%;
        --secondary-foreground: 0 0% 98%;
        --party-pink: 320 100% 70%;
        --party-orange: 30 100% 60%;
        --event-purple: 270 95% 65%;
        --friend-green: 150 80% 55%;
        --muted: 240 3.7% 15.9%;
        --muted-foreground: 240 5% 64.9%;
        --accent: 320 100% 70%;
        --accent-foreground: 0 0% 98%;
        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 0 0% 98%;
        --border: 240 3.7% 15.9%;
        --input: 240 3.7% 15.9%;
        --ring: 270 95% 65%;
        --radius: 0.5rem;
        
        /* Critical gradients */
        --gradient-party: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--party-pink)), hsl(var(--party-orange)));
        --gradient-event: linear-gradient(135deg, hsl(var(--event-purple)), hsl(var(--secondary)));
        --gradient-social: linear-gradient(135deg, hsl(var(--friend-green)), hsl(var(--secondary)));
        --shadow-party: 0 20px 40px -10px hsl(var(--primary) / 0.4);
      }
      
      /* Critical layout styles */
      *, *::before, *::after {
        box-sizing: border-box;
        border-color: hsl(var(--border));
      }
      
      body {
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -webkit-tap-highlight-color: transparent;
        touch-action: manipulation;
        overflow: hidden;
        position: fixed;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }
      
      html {
        height: 100%;
        height: 100vh;
        height: 100dvh;
      }
      
      #root {
        height: 100%;
        height: 100vh;
        height: 100dvh;
        display: flex;
        flex-direction: column;
      }
      
      /* Critical button styles */
      .btn-primary {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        white-space: nowrap;
        border-radius: calc(var(--radius) - 2px);
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.3s ease;
        background: var(--gradient-party);
        color: hsl(var(--primary-foreground));
        border: none;
        padding: 0.75rem 1.5rem;
        cursor: pointer;
        text-decoration: none;
        box-shadow: var(--shadow-party);
      }
      
      .btn-primary:hover {
        transform: scale(1.05);
        box-shadow: 0 25px 50px -10px hsl(var(--primary) / 0.6);
      }
      
      /* Critical text styles */
      .text-5xl { font-size: 3rem; line-height: 1; }
      .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
      .font-black { font-weight: 900; }
      .text-center { text-align: center; }
      .leading-tight { line-height: 1.25; }
      .leading-relaxed { line-height: 1.625; }
      .mb-6 { margin-bottom: 1.5rem; }
      .mb-8 { margin-bottom: 2rem; }
      .max-w-2xl { max-width: 42rem; }
      .max-w-4xl { max-width: 56rem; }
      .mx-auto { margin-left: auto; margin-right: auto; }
      .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
      
      /* Critical layout utilities */
      .relative { position: relative; }
      .absolute { position: absolute; }
      .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
      .z-0 { z-index: 0; }
      .z-10 { z-index: 10; }
      .z-20 { z-index: 20; }
      .flex { display: flex; }
      .flex-col { flex-direction: column; }
      .items-center { align-items: center; }
      .justify-center { justify-content: center; }
      .min-h-screen { min-height: 100vh; }
      .w-full { width: 100%; }
      .h-full { height: 100%; }
      .object-cover { object-fit: cover; }
      .overflow-hidden { overflow: hidden; }
      
      /* Critical gradient utilities */
      .gradient-party {
        background: var(--gradient-party);
        -webkit-background-clip: text;
        background-clip: text;
      }
      
      .bg-clip-text {
        -webkit-background-clip: text;
        background-clip: text;
      }
      
      .text-transparent {
        color: transparent;
      }
      
      .text-muted-foreground {
        color: hsl(var(--muted-foreground));
      }
      
      .text-foreground {
        color: hsl(var(--foreground));
      }
      
      /* Loading spinner for immediate display */
      .loading-spinner {
        width: 4rem;
        height: 4rem;
        border: 4px solid hsl(var(--muted));
        border-top: 4px solid hsl(var(--primary));
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 1rem;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      /* Prevent zoom on input focus */
      input[type="text"], input[type="email"], input[type="password"], textarea {
        font-size: 16px !important;
      }
      
      /* Mobile-specific safe areas */
      .safe-area-inset-bottom {
        padding-bottom: env(safe-area-inset-bottom);
      }
      
      .safe-area-inset-top {
        padding-top: env(safe-area-inset-top);
      }
      
      /* Better touch targets for mobile */
      button, .clickable {
        min-height: 44px;
        min-width: 44px;
      }
      
      /* Prevent overscroll bounce on iOS */
      html, body {
        overscroll-behavior: none;
      }
      
      /* Hide scrollbars on mobile */
      ::-webkit-scrollbar {
        width: 0px;
        background: transparent;
      }
      
      /* Media queries for responsive text */
      @media (min-width: 768px) {
        .text-5xl { font-size: 4.5rem; }
        .text-xl { font-size: 1.5rem; line-height: 2rem; }
      }
      
      @media (min-width: 1024px) {
        .text-5xl { font-size: 4.5rem; }
      }
    </style>
    
    <!-- Resource hints for performance optimization -->
    <link rel="preconnect" href="https://api.mapbox.com" crossorigin>
    <link rel="preconnect" href="https://events.mapbox.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="dns-prefetch" href="//cdn.supabase.com">
    <link rel="dns-prefetch" href="//models.readyplayer.me">
    <link rel="dns-prefetch" href="//render.readyplayer.me">
    
    <!-- Preload critical Mapbox resources and optimized hero image -->
    <link rel="preload" href="https://api.mapbox.com/mapbox-gl-js/v3.15.0/mapbox-gl.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://api.mapbox.com/fonts/mapbox" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/src/assets/hero-party-optimized.jpg" as="image" fetchpriority="high">
    
    <!-- Preload critical JavaScript modules -->
    <link rel="modulepreload" href="/src/main.tsx">
    <link rel="modulepreload" href="/src/App.tsx">
    <link rel="modulepreload" href="/src/pages/MainApp.tsx">
    <link rel="modulepreload" href="/src/components/RealMapComponent.tsx">
    <link rel="modulepreload" href="/src/components/HeroSection.tsx">
    
    <!-- Defer loading of non-critical resources -->
    <script>
      // Optimized CSS loading strategy to reduce unused CSS impact
      const loadCSS = (href, media = 'all') => {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = href;
        link.media = media;
        
        // Use onload to switch media to 'all' for deferred loading
        if (media !== 'all') {
          link.onload = function() {
            this.media = 'all';
            this.onload = null;
          };
        }
        
        document.head.appendChild(link);
        return link;
      };
      
      // Load CSS with progressive enhancement
      const optimizeLoading = () => {
        // Defer non-critical CSS to reduce unused CSS impact
        const cssLink = loadCSS('/src/index.css', 'print');
        
        // Load after a short delay to prioritize critical rendering
        setTimeout(() => {
          if (cssLink.media === 'print') {
            cssLink.media = 'all';
          }
        }, 100);
        
        // Pre-warm map tile cache for faster map rendering
        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.ready.then(() => {
            // Pre-cache hints for map tiles (placeholder implementation)
            const mapTileHints = [
              'https://api.mapbox.com/styles/v1/mapbox/streets-v12/tiles/256/3/4/2?access_token=',
              'https://api.mapbox.com/styles/v1/mapbox/streets-v12/tiles/256/3/4/3?access_token='
            ];
            // Note: Real implementation would use actual access token
          });
        }
      };
      
      // Load CSS after DOM is ready to prevent render blocking
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', optimizeLoading);
      } else {
        // Use requestIdleCallback if available for better performance
        if (window.requestIdleCallback) {
          requestIdleCallback(optimizeLoading);
        } else {
          setTimeout(optimizeLoading, 1);
        }
      }
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
